@tailwind base;
@tailwind components;
@tailwind utilities;

html {
  @apply overflow-auto;
}

body {
  @apply h-screen bg-neutral-900 text-white;
}

input {
  background: #0002;
  border-radius: 0.25rem;
  color: white;
  padding: 0.25rem 0.5rem;
}

#calendar-game-selector {
  padding: initial;
  border: initial;
  border-radius: initial;
  display: flex;
  justify-content: space-evenly;
  position: sticky;
  top: 0;
  z-index: 1;
  backdrop-filter: blur(16px);
  user-select: none;

  label {
    flex: 1;
    padding: 0.25rem 0.5rem;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s;
    border-bottom: 2px solid transparent;
    font-size: 0.75rem;

    &:hover {
      border-bottom-color: #fff8;
    }

    &:has(:checked) {
      border-bottom-color: white;
    }
  }

  input {
    display: none;
  }
}

#calendar {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 0.25rem;
  user-select: none;

  @media screen and (max-width: 1024px) {
    grid-template-columns: repeat(3, 1fr);
  }

  @media screen and (max-width: 768px) {
    grid-template-columns: repeat(2, 1fr);
  }

  @media screen and (max-width: 640px) {
    grid-template-columns: 1fr;
  }

  .month {
    margin: 0 auto;
    border-radius: 0.5rem;
    padding: 0.25rem;

    h2 {
      text-align: center;
      font-size: 0.75rem;
      font-weight: 500;
      margin-bottom: 0.25rem;
    }

    .days {
      display: grid;
      grid-template-columns: repeat(7, min-content);
      gap: 0.25rem;

      .day {
        border-radius: 0.25rem;
        padding: 0.125rem;
        text-align: center;
        color: #fff4;
        font-size: 0.75rem;
        aspect-ratio: 1;
        --background: transparent;
        transition-duration: 0.2s;
        background: hsl(from var(--background) h s calc(l * 0.5));

        &:hover {
          background: hsl(from var(--background) h s calc(l * 0.6));
        }

        &.attempted {
          --background: #fff;
          color: #000;
        }

        &.won {
          --background: #0f0;
          color: #fff;
        }

        &.lost {
          --background: #f00;
          color: #fff;
        }
      }
    }
  }
}

dialog {
  opacity: 0;
  transform: translateY(-10%);
  transition: all 0.2s ease-in-out allow-discrete;

  &::backdrop {
    opacity: 0;
    transition: all 0.2s ease-in-out allow-discrete;
  }

  &:open {
    opacity: 1;
    transform: translateY(0);

    &::backdrop {
      opacity: 1;
    }
  }

  fieldset {
    border: 1px solid #404040;
    border-radius: 0.25rem;
    padding: 0.5rem;
    user-select: none;

    legend {
      padding-inline: 0.25rem;
    }

    div.warning {
      svg {
        flex-shrink: 0;
      }

      display: flex;
      --warn-color: #ffae00;
      color: var(--warn-color);
      background: hsl(from var(--warn-color) h s l / 0.1);
      border: 1px solid var(--warn-color);
      padding: 0.5rem;
      border-radius: 0.25rem;
      gap: 0.5rem;
      align-items: center;
      font-size: 0.875rem;
      margin-bottom: 0.5rem;
    }

    button {
      border: 1px solid #737373;
      border-radius: 0.25rem;
      padding: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      transition-duration: 0.2s;

      &:hover {
        background-color: #404040;
      }
      &:active {
        background-color: #303030;
      }
    }

    p.ok {
      color: #86efac;
    }

    p.error {
      color: #f87171;
    }
  }
}

@starting-style {
  dialog:open {
    opacity: 0;
    transform: translateY(10%);

    &::backdrop {
      opacity: 0;
    }
  }
}

li[data-album] table {
  tbody tr {
    --hover-color: #fff1;
    --active-color: #0002;
    --expanded-color: #0001;

    border-top: 0.125rem solid #0002;
    cursor: pointer;
    transition: background 0.2s;

    &:focus,
    &:hover {
      background: var(--hover-color);
    }

    &:active {
      background: var(--active-color);
    }

    td {
      padding: 0.25rem 1rem;
      @apply px-2;

      &:first-child {
        border-top-left-radius: 0.25rem;
        border-bottom-left-radius: 0.25rem;
      }

      &:last-child {
        border-top-right-radius: 0.25rem;
        border-bottom-right-radius: 0.25rem;
      }
    }

    &[data-expanded="true"] {
      background: var(--expanded-color);

      td:first-child {
        border-bottom-left-radius: 0;
      }

      td:last-child {
        border-bottom-right-radius: 0;
      }

      &:focus,
      &:hover,
      &:focus + tr.details,
      &:hover + tr.details {
        background: var(--hover-color);
      }

      &:active,
      &:active + tr.details {
        background: var(--active-color);
      }

      & + tr.details {
        background: var(--expanded-color);
        display: table-row;
      }
    }

    &.details {
      border-top: none;
      color: #eee;
      cursor: initial;
      display: none;

      td {
        &:first-child {
          border-top-left-radius: 0;
          border-bottom-left-radius: 0.25rem;
        }

        &:last-child {
          border-top-right-radius: 0;
          border-bottom-right-radius: 0.25rem;
        }
      }
    }
  }
}

@property --DM {
  syntax: "<color>";
  inherits: false;
  initial-value: transparent;
}

@property --M {
  syntax: "<color>";
  inherits: false;
  initial-value: transparent;
}

@property --LM {
  syntax: "<color>";
  inherits: false;
  initial-value: transparent;
}

@property --DV {
  syntax: "<color>";
  inherits: false;
  initial-value: transparent;
}

@property --V {
  syntax: "<color>";
  inherits: false;
  initial-value: transparent;
}

@property --LV {
  syntax: "<color>";
  inherits: false;
  initial-value: transparent;
}

#index-background {
  transition:
    --DM 1s ease-in-out,
    --M 1s ease-in-out,
    --LM 1s ease-in-out,
    --DV 1s ease-in-out,
    --V 1s ease-in-out,
    --LV 1s ease-in-out;
}

@keyframes slideDown {
  from {
    height: 0;
  }
  to {
    height: var(--radix-accordion-content-height);
  }
}

@keyframes slideUp {
  from {
    height: var(--radix-accordion-content-height);
  }
  to {
    height: 0;
  }
}

@font-face {
  font-family: "HYWenHei 85W";
  font-style: normal;
  font-weight: normal;
  src:
    local("HYWenHei 85W"),
    url("./assets/fonts/zhcn.woff") format("woff");
}

@font-face {
  font-family: "DINPro-Medium";
  src: url("./assets/fonts/DINPro-Medium.ttf") format("truetype");
}

@font-face {
  font-family: "inpin_hongmengti";
  src: url("./assets/fonts/inpin_hongmengti.ttf") format("truetype");
}
